<aside
  id="sidebar"
  class="w-64 min-h-screen bg-white border-r shadow-xl fixed inset-y-0 left-0 z-40 transform transition-transform duration-300 -translate-x-full md:translate-x-0 flex flex-col"
>
  <!-- Logo and Business Info -->
  <div class="p-6 flex items-center gap-3 border-b bg-white">
    <img src="/assets/logo-placeholder.png" alt="Logo" class="w-10 h-10 rounded-full shadow object-cover" />
    <div>
      <h1 class="text-base font-extrabold text-blue-600 uppercase leading-tight">LADYGREENER</h1>
      <p class="text-xs text-gray-400 truncate">Admin</p>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 overflow-y-auto px-4 py-6 space-y-2 text-sm font-medium text-gray-800">

    <a href="/admin/dashboard" class="nav-link">
      <i class="fas fa-home text-blue-500 w-4"></i> Dashboard
    </a>

    <a href="/admin/domains" class="nav-link">
      <i class="fas fa-globe text-blue-500 w-4"></i> Domains
    </a>

    <!-- Marketing Submenu -->
    <div>
      <button
        type="button"
        onclick="toggleSubmenu('marketing-submenu', this)"
        class="nav-link w-full justify-between"
      >
        <span class="flex items-center gap-3">
          <i class="fas fa-bullhorn text-blue-500 w-4"></i> Marketing
        </span>
        <i class="fas fa-chevron-down transform transition-transform duration-200 text-xs text-gray-400"></i>
      </button>
      <div
        id="marketing-submenu"
        class="submenu max-h-0 overflow-hidden transition-all duration-300 ml-6 mt-1 space-y-1"
      >
        <a href="/admin/marketing/coupons" class="submenu-link">
          <i class="fas fa-tag w-4"></i> Coupons
        </a>
        <a href="/admin/marketing/blog" class="submenu-link">
          <i class="fas fa-blog w-4"></i> Blog
        </a>
      </div>
    </div>

    <!-- Forms Submenu -->
    <div>
      <button
        type="button"
        onclick="toggleSubmenu('forms-submenu', this)"
        class="nav-link w-full justify-between"
      >
        <span class="flex items-center gap-3">
          <i class="fas fa-clipboard-list text-blue-500 w-4"></i> Forms
        </span>
        <i class="fas fa-chevron-down transform transition-transform duration-200 text-xs text-gray-400"></i>
      </button>
      <div
        id="forms-submenu"
        class="submenu max-h-0 overflow-hidden transition-all duration-300 ml-6 mt-1 space-y-1"
      >
        <a href="/admin/forms/create" class="submenu-link">
          <i class="fas fa-plus-circle w-4"></i> Create Forms
        </a>
        <a href="/admin/forms/entries" class="submenu-link">
          <i class="fas fa-list-alt w-4"></i> Entries
        </a>
        <a href="/admin/forms/reports" class="submenu-link">
          <i class="fas fa-chart-line w-4"></i> Reports
        </a>
      </div>
    </div>

    <a href="/admin/support_ticket" class="nav-link">
      <i class="fas fa-headset text-blue-500 w-4"></i> Support Tickets
    </a>

    <a href="/admin/calendar" class="nav-link">
      <i class="fas fa-calendar-alt text-blue-500 w-4"></i> Calendar
    </a>

    <a href="/admin/settings" class="nav-link">
      <i class="fas fa-cog text-blue-500 w-4"></i> Settings
    </a>
  </nav>

  <!-- CTA and Logout -->
  <div class="px-4 py-4 border-t bg-white space-y-2">
    <a href="/admin/book" class="btn btn-indigo w-full flex justify-center items-center gap-2">
      <i class="fas fa-calendar-check"></i> Book Now
    </a>
    <a href="/logout" class="flex items-center justify-center gap-2 text-red-500 hover:underline text-sm transition">
      <i class="fas fa-sign-out-alt"></i> Logout
    </a>
  </div>
</aside>

<script>
  function toggleSubmenu(id, button) {
    const submenu = document.getElementById(id);
    const icon = button.querySelector(".fa-chevron-down");

    if (submenu.classList.contains("max-h-0")) {
      submenu.classList.remove("max-h-0");
      submenu.classList.add("max-h-[300px]");
      icon.classList.add("rotate-180");
    } else {
      submenu.classList.add("max-h-0");
      submenu.classList.remove("max-h-[300px]");
      icon.classList.remove("rotate-180");
    }
  }

  // Auto-highlight active link and submenu
  const currentPath = window.location.pathname;
  const allLinks = document.querySelectorAll(".nav-link, .submenu-link");

  allLinks.forEach(link => {
    const href = link.getAttribute("href");
    if (href && currentPath.startsWith(href)) {
      link.classList.add("bg-blue-100", "text-blue-700", "font-semibold");

      // Auto-expand parent submenu if match found
      const submenu = link.closest(".submenu");
      if (submenu) {
        submenu.classList.remove("max-h-0");
        submenu.classList.add("max-h-[300px]");
        const toggleBtn = submenu.previousElementSibling;
        if (toggleBtn?.querySelector(".fa-chevron-down")) {
          toggleBtn.querySelector(".fa-chevron-down").classList.add("rotate-180");
        }
      }
    }
  });
</script>
