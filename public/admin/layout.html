<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Panel</title>

  <!-- Tailwind Output -->
  <link rel="stylesheet" href="/dist/output.css" />

  <!-- Local Font Awesome (no CDN) -->
  <link rel="stylesheet" href="/vendor/fontawesome/css/all.min.css" />
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex">

  <!-- Mobile Hamburger Toggle -->
  <button
    id="sidebarToggle"
    class="md:hidden fixed top-4 left-4 z-50 bg-white border p-2 rounded shadow"
    aria-label="Toggle Sidebar"
  >
    <i class="fa-solid fa-bars text-gray-800"></i>
  </button>

  <!-- Sidebar (loaded via fetch) -->
  <div id="sidebar-container" class="z-40"></div>

  <!-- Main Content Area -->
  <main class="flex-1 p-6 ml-0 md:ml-64 transition-all">
    <h1 class="text-2xl font-bold mb-4">Welcome to Admin</h1>
    <p>Your main content goes here.</p>
  </main>

  <!-- JS: Load sidebar + toggle + active highlight -->
  <script>
    // Dynamically load the sidebar HTML
    fetch("/admin/sidebar.html")
      .then(res => res.text())
      .then(html => {
        const container = document.getElementById("sidebar-container");
        container.innerHTML = html;

        const currentPath = window.location.pathname;
        document.querySelectorAll("#sidebar a[href]").forEach(link => {
          if (link.getAttribute("href") === currentPath) {
            link.classList.add("bg-blue-100", "text-blue-700", "font-semibold");
          }
        });

        // Re-attach mobile toggle after sidebar loads
        const sidebar = document.getElementById("sidebar");
        const toggle = document.getElementById("sidebarToggle");
        if (sidebar && toggle) {
          toggle.addEventListener("click", () => {
            sidebar.classList.toggle("-translate-x-full");
          });
        }
      });
  </script>
<script>
  // Load sidebar dynamically
  fetch("/admin/sidebar.html")
    .then(res => res.text())
    .then(html => {
      const container = document.getElementById("sidebar-container");
      container.innerHTML = html;

      // Toggle sidebar (mobile)
      document.getElementById("sidebarToggle")?.addEventListener("click", () => {
        document.getElementById("sidebar").classList.toggle("-translate-x-full");
      });

      // Toggle submenus
      document.querySelectorAll("[data-toggle]").forEach(btn => {
        const id = btn.getAttribute("data-toggle");
        const submenu = document.getElementById(id);
        const icon = document.getElementById("icon-" + id);

        btn.addEventListener("click", () => {
          submenu?.classList.toggle("hidden");
          icon?.classList.toggle("rotate-180");
        });
      });

      // Highlight current link
      const currentPath = window.location.pathname;
      document.querySelectorAll("#sidebar a[href]").forEach(link => {
        if (link.getAttribute("href") === currentPath) {
          link.classList.add("bg-blue-100", "text-blue-700", "font-semibold");
        }
      });

      // Fetch logo/business info
      fetch('/api/business/public')
        .then(res => res.json())
        .then(data => {
          if (data.business_name) document.getElementById('bizName').textContent = data.business_name;
          if (data.logo_filename) document.getElementById('logo').src = '/uploads/' + data.logo_filename;
        })
        .catch(() => {});
    });
</script>



</body>
</html>
